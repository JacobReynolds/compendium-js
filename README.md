# Compendium

English Natural Language Processing for Node.js and the browser. 

100k only for the browser package. MIT licensed.

Currently in Alpha version.

## Milestones

#### Version 1

- ✔ Tokenization
- ✔ Part-of-Speech tagging
- ✔ Inflector (singularization, pluralization)
- ✔ Acronyms detection
- o Negation detection
- o Tense detection
- o Profiling (sentiment, politeness, type of sentence)
    + ✔ Token scoring
    + o Scoring consolidation
    + o Politeness
    + o Type of sentence
- o Dependency parsing
- o Example/demo page
- o Date extraction
- ✔ Entities extraction
- o Use a trie for lexicon querying on runtime

#### Version 2

- o Dynamic loading of lexicon, w/ versioning and cache using Application Cache
- o Use from a Web Worker (threaded processing)

## Part-of-Speech tagging

Tagging is performed using a [Brill tagger](http://en.wikipedia.org/wiki/Eric_Brill), with the addition of some inflexion-based rules.

It takes inspiration from the following projects that are worth being checked out:
- Eric Brill tagger: latest implementation published under MIT license is available for download on Plymouth University [at this link (direct download)](http://www.tech.plym.ac.uk/soc/staff/guidbugm/software/RULE_BASED_TAGGER_V.1.14.tar.Z).
- [Mark Watson's FastTag Java library](https://github.com/mark-watson/fasttag_v2), one of the implementation of Brill's tagger.
- [NLP Compromise](https://github.com/spencermountain/nlp_compromise), another great JS NLP toolkit, with an interesting inflection-based approach

PoS tagging tests are performed both against the [Penn Treebank](http://www.cis.upenn.edu/~treebank/) dataset, and against results generated by the [Stanford PoS tagger](http://nlp.stanford.edu/software/tagger.shtml) ([here is an online API](nlp.stanford.edu:8080/parser/index.jsp)).

## Flavours

Two versions are available, one for the browser, the other for Node.js:

- Full version for Node.js uses the lexicon from Mark Watson's FastTag (around 90 000 terms)
- Minimal version for the browser contains only a few thousands terms extracted from the full version, and filtered using the list of the 10000 most common English words + the list of scored sentiments words. Most common words list is [an extract](https://github.com/first20hours/google-10000-english) from the [Google's Trillion Word Corpus](http://storage.googleapis.com/books/ngrams/books/datasetsv2.html).

## How to use

#### Node.js

    npm install --save compendium

and then:

    var compendium = require('compendium');
        
    console.log(compendium.analyse('Hello world'));

#### In the browser

With `bower`:

    bower install --save compendium

Otherwise clone this repo and copy the `dist/compendium.minimal.js` file into your project.

Then:

    <!-- Include the lib with the minimal lexicon -->
    <script type="text/javascript" 
        src="path/to/compendium/dist/compendium.minimal.js"></script>
     
    <!-- Use it -->
    <script type="text/javascript">
        console.log(compendium.analyse('Hello world'));
    </script>

## API

##### lex : tokenize a string

Returns a matrix of tokens per sentences.

    compendium.lex (text)

Example:

    compendium.lex('My name is Dr. Jekyll. My cat\'s name is Mr. Hyde.');
    //  [
    //      ['My', 'name', 'is', 'Dr.', 'Jekyll', '.'],
    //      ['My', 'cat', '\'', 's', 'name', 'is', 'Mr.', 'Hyde', '.']
    //  ]

##### tag : return Part-of-Speech tags from an array of tokens

Returns an array of tags and a confidence into the tagging.

    compendium.tag (tokens)

    compendium.tag(['My', 'name', 'is', 'Dr.', 'Jekyll', '.']);
    //  {
    //      tags: [ 'PRP$', 'NN', 'VBZ', 'NNP', 'NNP', '.' ],
    //      confidence: 1
    //  }

##### analyse : perform a full analysis

    compendium.analyse('My name is Dr. Jekyll.');
    // [{ 
    //     time: 0,
    //     confidence: 1,
    //     raw: 'My name is Dr. Jekyll .',
    //     tokens:[{ 
    //         raw: 'My',
    //         pos: 'PRP$',
    //         is_acronym: false
    //     }, {
    //         raw: 'name',
    //         pos: 'NN',
    //         is_acronym: false
    //     }, {
    //         raw: 'is',
    //         pos: 'VBZ',
    //         is_acronym: false
    //     }, {
    //         raw: 'Dr.',
    //         pos: 'NNP',
    //         is_acronym: true
    //     }, {
    //         raw: 'Jekyll',
    //         pos: 'NNP',
    //         is_acronym: false
    //     }, {
    //         raw: '.',
    //         pos: '.',
    //         is_acronym: false 
    //     }],
    //     tags: [ 'PRP$', 'NN', 'VBZ', 'NNP', 'NNP', '.']
    // }]

## Development

#### Setup env

    npm install

then, in order to initialize the build process:

    mkdir build && gulp lexicon

#### Build

Next NLP requires `gulp` for the build process. Install it globally using `npm install -g gulp`.

Use `gulp` command to build and watch the source files for changes for live rebuild. Use `gulp -p` 

#### Test

Next NLP uses `nodeunit` for running the tests. Install it with `npm install nodeunit -g`. Use `nodeunit test/*.js` to run the tests.


## Tags definition

    , Comma                     ,
    : Mid-sent punct.           : ; Ñ
    . Sent-final punct          . ! ?
    " quote                     "
    ( Left paren                (
    ) Right paren               )
    # Pound sign                #
    CC Coord Conjuncn           and,but,or
    CD Cardinal number          one,two
    CR Currency sign            $, €, £
    DT Determiner               the,some
    EM Emoticon                 :) :(
    EX Existential there        there
    FW Foreign Word             mon dieu
    IN Preposition              of,in,by
    JJ Adjective                big
    JJR Adj., comparative       bigger
    JJS Adj., superlative       biggest
    LS List item marker         1,One
    MD Modal                    can,should
    NN Noun, sing. or mass      dog
    NNP Proper noun, sing.      Edinburgh
    NNPS Proper noun, plural    Smiths
    NNS Noun, plural            dogs
    PDT Predeterminer           all, both
    POS Possessive ending       Õs
    PP Personal pronoun         I,you,she
    PP$ Possessive pronoun      my,oneÕs
    RB Adverb                   quickly, not
    RBR Adverb, comparative     faster
    RBS Adverb, superlative     fastest
    RP Particle                 up,off
    SYM Symbol                  +,%,&
    TO ÒtoÓ                     to
    UH Interjection             oh, oops
    VB verb, base form          eat
    VBD verb, past tense        ate
    VBG verb, gerund            eating
    VBN verb, past part         eaten
    VBP Verb, present           eat
    VBZ Verb, present           eats
    WDT Wh-determiner           which,that
    WP Wh pronoun               who,what
    WP$ Possessive-Wh           whose
    WRB Wh-adverb               how,where


