!function(e){"use strict";function t(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n])}function n(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var i={},r={},o={},s={},a={},l={},u={},f={},c={},p=Array.isArray,d={profile:{negative_threshold:-.3,positive_threshold:.3,amplitude_threshold:.3,polite_threshold:.2,dirty_threshold:.3},parser:["v1","v2"]},g="foreign",h="interrogative",m="exclamatory",v="headline",N="imperative",y="approval",P="refusal";e.detect=a,e.dependencies=l,e.inflector=f,e.compendium=i,e.lexer=r,e.parser=u,e.factory=o,e.pos=c,e.config=d,!function(){var n=["tuna","trout","spacecraft","salmon","halibut","aircraft","equipment","information","rice","money","species","series","fish","sheep","moose","deer","news","asbestos"],i=[[/^index$/gi,"indices"],[/^criterion$/gi,"criteria"],[/dix$/gi,"dices"],[/(a|o)ch$/gi,"$1chs"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat|her)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(quiz)$/gi,"$1zes"],[/^gas$/gi,"gases"],[/s$/gi,"s"],[/$/gi,"s"]],r=[[/(m)en$/gi,"$1an"],[/(pe)ople$/gi,"$1rson"],[/(child)ren$/gi,"$1"],[/([ti])a$/gi,"$1um"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses/gi,"$1$2sis"],[/(hive)s$/gi,"$1"],[/(tive)s$/gi,"$1"],[/(curve)s$/gi,"$1"],[/([lr])ves$/gi,"$1f"],[/([^fo])ves$/gi,"$1fe"],[/([^aeiouy]|qu)ies$/gi,"$1y"],[/(s)eries$/gi,"$1eries"],[/(m)ovies$/gi,"$1ovie"],[/(x|ch|ss|sh)es$/gi,"$1"],[/([m|l])ice$/gi,"$1ouse"],[/(bus)es$/gi,"$1"],[/(o)es$/gi,"$1"],[/(shoe)s$/gi,"$1"],[/(cris|ax|test)es$/gi,"$1is"],[/(octop|vir)i$/gi,"$1us"],[/(alias|status)es$/gi,"$1"],[/^(ox)en/gi,"$1"],[/(vert|ind)ices$/gi,"$1ex"],[/(matr)ices$/gi,"$1ix"],[/(quiz)zes$/gi,"$1"],[/s$/gi,""]],o=function(e,t,i){var r,o;if(n.indexOf(e.toLowerCase())>-1)return e;for(r=0,o=t.length;o>r;r++)if(e.match(t[r][0])){e=e.replace(t[r][0],t[r][1]);break}return e},s=function(e,t){var i,r;if(n.indexOf(e.toLowerCase())>-1)return!1;for(i=0,r=t.length;r>i;i++)if(e.match(t[i][0]))return!0;return!1},a="VBZ",l="VBG",u="VBN",c=function(e,t){return t===a?e+"s":t===l?e+"ing":t===u?e+"ed":e},p=function(e,t){return t===a?e+"s":t===l?e+e[e.length-1]+"ing":t===u?e+e[e.length-1]+"ed":e},d=function(e,t){var n=e.slice(0,e.length-1);return t===a?e+"s":t===l?n+"ing":t===u?n+"ed":e},g=function(e,t){var n=e.slice(0,e.length-1);return t===a?n+"ies":t===l?e+"ing":t===u?n+"ied":e},h=function(e,t){return t===a?e+"s":t===l?e+"ing":t===u?e+"d":e},m=function(e,t){return t===a?e+"s":t===l?e.slice(0,e.length-1)+"ing":t===u?e+"d":e},v=function(e,t){return t===a?e+"s":t===l?e.slice(0,e.length-2)+"ying":t===u?e+"d":e},N=function(e,t){return t===a?e+"es":t===l?e+"ing":t===u?e+"ed":e};t(f,{isSingular:function(e){return f.isUncountable(e)||s(e,i)},isPlural:function(e){return e.match(/([saui]s|[^i]a)$/gi)?!1:s(e,r)},isUncountable:function(e){return n.indexOf(e)>-1},singularize:function(e){return f.isPlural(e)?o(e,r):e},pluralize:function(e){return f.isSingular(e)?o(e,i):e},conjugate:function(e,t){e[e.length-1];return e.match(/[^aeiou]y$/gi)?g(e,t):e.match(/[^aeiouy]e$/gi)?d(e,t):e.match(/([aeiuo][ptlgnm]|ir|cur|[^aeiuo][oua][db])$/gi)?p(e,t):e.match(/([ieao]ss|[aeiouy]zz|[aeiouy]ch|nch|rch|[aeiouy]sh|[iae]tch|ax)$/gi)?N(e,t):e.match(/(ee)$/gi)?h(e,t):e.match(/(ie)$/gi)?v(e,t):e.match(/(ue)$/gi)?m(e,t):e.match(/([uao]m[pb]|[oa]wn|ey|elp|[ei]gn|ilm|o[uo]r|[oa]ugh|igh|ki|ff|oubt|ount|awl|o[alo]d|[iu]rl|upt|[oa]y|ight|oid|empt|act|aud|e[ea]d|ound|[aeiou][srcln]t|ept|dd|[eia]n[dk]|[ioa][xk]|[oa]rm|[ue]rn|[ao]ng|uin|eam|ai[mr]|[oea]w|[eaoui][rscl]k|[oa]r[nd]|ear|er|it|ll)$/gi)?c(e,t):null},toPast:function(e){return f.conjugate(e,u)},toGerund:function(e){return f.conjugate(e,l)},toPresents:function(e){return f.conjugate(e,a)},infinitive:function(t){var n=e.lexicon[t];return n&&n.hasOwnProperty("infinitive")?n.infinitive:"are"===t||"am"===t||"'s"===t?"be":null}}),e.inflector=f}(),!function(){function t(e){throw new RangeError(B[e])}function n(e,t){for(var n=e.length,i=[];n--;)i[n]=t(e[n]);return i}function i(e,t){var i=e.split("@"),r="";i.length>1&&(r=i[0]+"@",e=i[1]),e=e.replace(V,".");var o=e.split("."),s=n(o,t).join(".");return r+s}function r(e){for(var t,n,i=[],r=0,o=e.length;o>r;)t=e.charCodeAt(r++),t>=55296&&56319>=t&&o>r?(n=e.charCodeAt(r++),56320==(64512&n)?i.push(((1023&t)<<10)+(1023&n)+65536):(i.push(t),r--)):i.push(t);return i}function o(e){return n(e,function(e){var t="";return e>65535&&(e-=65536,t+=D(e>>>10&1023|55296),e=56320|1023&e),t+=D(e)}).join("")}function s(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:h}function a(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function l(e,t,n){var i=0;for(e=n?k(e/y):e>>1,e+=k(e/t);e>O*v>>1;i+=h)e=k(e/O);return k(i+(O+1)*e/(e+N))}function u(e){var n,i,r,a,u,f,c,p,d,N,y=[],$=e.length,w=0,V=b,B=P;for(i=e.lastIndexOf(x),0>i&&(i=0),r=0;i>r;++r)e.charCodeAt(r)>=128&&t("not-basic"),y.push(e.charCodeAt(r));for(a=i>0?i+1:0;$>a;){for(u=w,f=1,c=h;a>=$&&t("invalid-input"),p=s(e.charCodeAt(a++)),(p>=h||p>k((g-w)/f))&&t("overflow"),w+=p*f,d=B>=c?m:c>=B+v?v:c-B,!(d>p);c+=h)N=h-d,f>k(g/N)&&t("overflow"),f*=N;n=y.length+1,B=l(w-u,n,0==u),k(w/n)>g-V&&t("overflow"),V+=k(w/n),w%=n,y.splice(w++,0,V)}return o(y)}function f(e){var n,i,o,s,u,f,c,p,d,N,y,$,w,V,B,O=[];for(e=r(e),$=e.length,n=b,i=0,u=P,f=0;$>f;++f)y=e[f],128>y&&O.push(D(y));for(o=s=O.length,s&&O.push(x);$>o;){for(c=g,f=0;$>f;++f)y=e[f],y>=n&&c>y&&(c=y);for(w=o+1,c-n>k((g-i)/w)&&t("overflow"),i+=(c-n)*w,n=c,f=0;$>f;++f)if(y=e[f],n>y&&++i>g&&t("overflow"),y==n){for(p=i,d=h;N=u>=d?m:d>=u+v?v:d-u,!(N>p);d+=h)B=p-N,V=h-N,O.push(D(a(N+B%V,0))),p=k(B/V);O.push(D(a(p,0))),u=l(i,w,o==s),i=0,++o}++i,++n}return O.join("")}function c(e){return i(e,function(e){return $.test(e)?u(e.slice(4).toLowerCase()):e})}function p(e){return i(e,function(e){return w.test(e)?"xn--"+f(e):e})}var d,g=2147483647,h=36,m=1,v=26,N=38,y=700,P=72,b=128,x="-",$=/^xn--/,w=/[^\x20-\x7E]/,V=/[\x2E\u3002\uFF0E\uFF61]/g,B={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},O=h-m,k=Math.floor,D=String.fromCharCode;d={version:"1.3.2",ucs2:{decode:r,encode:o},decode:u,encode:f,toASCII:p,toUnicode:c},e.punycode=d}(),!function(){var t={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},n={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},i="[^aeiou]",r="[aeiouy]",o=i+"[^aeiouy]*",s=r+"[aeiou]*",a="^("+o+")?"+s+o,l="^("+o+")?"+s+o+"("+s+")?$",u="^("+o+")?"+s+o+s+o,f="^("+o+")?"+r,c=function(e){var i,s,c,p,d,g,h,m;return e.length<3?e:(c=e.substr(0,1),"y"==c&&(e=c.toUpperCase()+e.substr(1)),d=/^(.+?)(ss|i)es$/,g=/^(.+?)([^s])s$/,d.test(e)?e=e.replace(d,"$1$2"):g.test(e)&&(e=e.replace(g,"$1$2")),d=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,d.test(e)?(p=d.exec(e),d=new RegExp(a),d.test(p[1])&&(d=/.$/,e=e.replace(d,""))):g.test(e)&&(p=g.exec(e),i=p[1],g=new RegExp(f),g.test(i)&&(e=i,g=/(at|bl|iz)$/,h=new RegExp("([^aeiouylsz])\\1$"),m=new RegExp("^"+o+r+"[^aeiouwxy]$"),g.test(e)?e+="e":h.test(e)?(d=/.$/,e=e.replace(d,"")):m.test(e)&&(e+="e"))),d=/^(.+?)y$/,d.test(e)&&(p=d.exec(e),i=p[1],d=new RegExp(f),d.test(i)&&(e=i+"i")),d=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,d.test(e)&&(p=d.exec(e),i=p[1],s=p[2],d=new RegExp(a),d.test(i)&&(e=i+t[s])),d=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,d.test(e)&&(p=d.exec(e),i=p[1],s=p[2],d=new RegExp(a),d.test(i)&&(e=i+n[s])),d=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,g=/^(.+?)(s|t)(ion)$/,d.test(e)?(p=d.exec(e),i=p[1],d=new RegExp(u),d.test(i)&&(e=i)):g.test(e)&&(p=g.exec(e),i=p[1]+p[2],g=new RegExp(u),g.test(i)&&(e=i)),d=/^(.+?)e$/,d.test(e)&&(p=d.exec(e),i=p[1],d=new RegExp(u),g=new RegExp(l),h=new RegExp("^"+o+r+"[^aeiouwxy]$"),(d.test(i)||g.test(i)&&!h.test(i))&&(e=i)),d=/ll$/,g=new RegExp(u),d.test(e)&&g.test(e)&&(d=/.$/,e=e.replace(d,"")),"y"==c&&(e=c.toLowerCase()+e.substr(1)),e)};e.stemmer=c}(),!function(){var e=function(){this.t_={}};e.prototype.add=function(e,t){throw new Error("Not implmented")},e.prototype.isset=function(e){return null!==this.get(e)},e.prototype.get=function(e){throw new Error("Not implmented")}}(),!function(){var t=["en","fr"];s.toObject=function(e,t){},s.applyPOS=function(t,n,i){var r,s,a;for(a=e.tag(n,i),t.tags=a.tags,t.stats.confidence=a.confidence,r=0,s=n.length;s>r;r++)t.tokens.push(o.token(n[r],a.norms[r],a.tags[r]));return t.length=s,t},s.analyse=function(t,n){var i,f,c,p,g,h,m,v,N,y=[];for(f=r.advanced(e.decode(t),n),c=f.sentences,i=0,p=c.length;p>i;i++){for(g=Date.now(),h=o.sentence(f.raws[i],n),s.applyPOS(h,c[i],n),e.stat(h),v=a.context(),m=0,N=h.tokens.length;N>m;m++)a.apply("t",!0,h.tokens[m],m,h,v);for(a.apply("s",!0,h,i,y,v),d.parser.indexOf("v1")>-1&&l.parse(h),d.parser.indexOf("v1")>-1&&u.parse(h),m=0,N=h.tokens.length;N>m;m++)a.apply("t",!1,h.tokens[m],m,h,v);y.push(h),a.apply("s",!1,h,i,y,v),h.time=Date.now()-g}return y},e.analyse=function(e,n){var i=null;if(n=n||"en",-1===t.indexOf(n))throw new Error("Compendium supports only the following languages: "+t.join(", "));return i=s.analyse(e,n),a.apply("p",!1,i),i}}(),!function(){t(i,{verbs:"".split(" "),irregular:"".split("	").map(function(e){return e.split(" ")}),infinitives:[],ing_excpt:[],ing_test:[],emphasis:[],abbrs:["jr","junior","mr","mister","mrs","missus","ms","miss","dr","doctor","prof","professor","pr","professor","sr","senior","sen","senator","sens","senators","corp","corporation","rep","","gov","","atty","attorney","supt","superintendent","det","detective","rev","","col","colonel","gen","general","lt","lieutenant","cmdr","commander","adm","administrative","capt","captain","sgt","sergent","cpl","caporal","maj","","esq","esquire","phd","","adj","adjective","adv","adverb","asst","assistant","bldg","building","brig","brigade","hon","","messrs","messeurs","mlle","mademoiselle","mme","madame","op","","ord","order","pvt","private","reps","","res","","sens","","sfc","","surg","surgeon","ph","","ds","","arc","","al","","ave","avenue","blvd","boulevard","cl","","ct","","cres","","exp","","rd","road","st","street","dist","","mt","mount","ft","","fy","","hwy","highway","la","","pd","","pl","","plz","","tce","","vs","","etc","","esp","","llb","","md","","bl","","ma","","ba","","lit","","fl","","ex","example","eg","","ala","alabama","ariz","arizona","ark","arkansas","cal","california","calif","california","col","coloradoa","colo","colorado","conn","connecticut","del","delaware","fed","federal","fla","florida","ga","georgia","ida","idaho","id","idaho","ill","illinois","ind","indiana","ia","iowa","kan","kansas","kans","kansas","ken","kentuky","ky","kentuky","la","","me","","md","","mass","massachussets","mich","michigan","minn","minnesota","miss","mississippi","mo","missouri","mont","montana","neb","nebraska","nebr","nebraska","nev","nevada","mex","mexico","okla","oklahoma","ok","oklahoma","ore","oregon","penna","pennsylvania","penn","pennsylvania","pa","pennsylvania","dak","dakota","tenn","tennessee","tex","texas","ut","utah","vt","vermont","va","virginia","wash","washington","wis","wisconsin","wisc","wisconsin","wy","wyoming","wyo","wyoming","alta","alberta","ont","ontario","que","quebec","sask","saskatchewan","yuk","yukon","jan","january","feb","february","mar","march","apr","april","jun","june","jul","july","aug","august","sep","september","oct","october","nov","november","dec","december","sept","september","dept","department","univ","university","assn","association","bros","brothers","inc","incorported","ltd","limited","co",""],synonyms:"",abbrs_rplt:[],exclamations:["yahoo","joomla","jeopardy"],rules:"",suffixes:"",emots:[],floatChar:",",thousandChar:".",multipliers:["cent","mille","million","milliard","billion"],numbers:{zero:0,one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12,thirteen:13,fourteen:14,fifteen:15,sixteen:16,seventeen:17,eighteen:18,nineteen:19,ninteen:19,twenty:20,thirty:30,forty:40,fourty:40,fifty:50,sixty:60,seventy:70,eighty:80,ninety:90,hundred:100,thousand:1e3,million:1e6,billion:1e9,trillion:1e12},nationalities:"",neg:{},neg_neg:{},refusal:{},approval:{},approval_verbs:[],breakpoints:{},citations:{'"':'"',"'":'"',"`":'"'},p:{},months:{},days:{},indicators:{},dirty:"".split(" "),polite:"".split(" ")})}(),!function(){var t=e.inflector,n=function(n){var r,o,s,a,l,u,f,c,d,g,h,m=(Date.now(),n.split("	")),v={},N=[];for(r=0,s=m.length;s>r;r++)h=m[r].split(" "),l=!1,g=h.length-1,f=g>0?h[1].trim():"",a=f.length-1,a>0&&"-"===f[a]&&(l=!0,f=f.slice(0,a)),c=0,d=null,h[g].match(/^[A-Z]{2,}\/[0-9\-]+$/g)?(d=h[g].split("/")[0],c=h[g].split("/")[1]):(h[g].match(/^[0-9\-]+$/g)||h[g].match(/^\-{0,1}[0-4]\.[0-9]$/g))&&(c=h[g].indexOf(".")>0?parseFloat(h[g]):parseInt(h[g],10)),"EM"===f&&e.punycode.ucs2.decode(h[0]).length>1&&N.push(h[0]),v[h[0]]={pos:"-"===f?"NN":f,sentiment:c,condition:d,blocked:l};for(r in i)if(i.hasOwnProperty(r)&&"object"==typeof i[r]&&!p(i[r])){h=i[r];for(s in h)h.hasOwnProperty(s)&&(c=0,"string"==typeof h[s]?(v.hasOwnProperty(s)&&(c=v[s].sentiment),v[s]={pos:h[s],sentiment:c,condition:null}):"number"==typeof h[s]&&(v[s]={pos:"CD",sentiment:c,value:h[s],condition:null}))}for(r=0,s=i.verbs.length;s>r;r++,c=0)h=i.verbs[r],i.infinitives.push(h),u=t.conjugate(h,"VBZ"),u&&(v.hasOwnProperty(h)&&("NN"===v[h].pos&&(v[h].pos="VB"),l=v[h].blocked,c=v[h].sentiment),v[u]={pos:"VBZ",sentiment:c,condition:null,infinitive:h,blocked:l},u=t.conjugate(h,"VBN"),v.hasOwnProperty(u)?v[u].infinitive=h:v[u]={pos:"VBN",sentiment:c,condition:null,infinitive:h},u=t.conjugate(h,"VBG"),v.hasOwnProperty(u)?v[u].infinitive=h:v[u]={pos:"VBG",sentiment:c,condition:null,infinitive:h});for(r=0,s=i.irregular.length;s>r;r++,c=0)for(h=i.irregular[r],g=h[0],v.hasOwnProperty(g)&&(c=v[g].sentiment,"VB"!==v[g].pos&&(v[g].pos="VB")),i.infinitives.push(g),o=0;5>o;o++)h[o].split("/").map(function(e){v.hasOwnProperty(e)?v[e].infinitive||(v[e].infinitive=g,v[e].sentiment=c):v[e]={pos:0===o?"VB":1===o?"VBD":2===o?"VBN":3===o?"VBZ":"VBG",sentiment:c,condition:null,infinitive:g}});return i.emots=N,v},r=function(e){e=e.split("	");var t,n,r,o=[],s=e.length;for(r=0;s>r;r++)t=e[r].split(" "),"+"===t[t.length-1]?(t.splice(t.length-1,1),n=!0):n=!1,o.push({from:t[0],to:t[1],type:parseInt(t[2],10),c1:t[3],c2:t[4],c3:t[5],secondRun:n});i.rules=o},o=function(e){e=e.split("	");var t,n,r=e.length,o=[];for(t=0;r>t;t++)n=e[t].split(" "),o.push({regexp:new RegExp("^.{1,}"+n[0].trim()+"$","gi"),pos:n[1]});i.suffixes=o},s=function(e){var n,i=e.length;for(n=0;i>n;n++)e.push(t.pluralize(e[n]))},a=function(e){var t,n=e.length,r=[],o=[];for(t=0;n>t;t++)t%2===0?r.push(e[t]):o.push(e[t]);i.abbrs=r,i.abbrs_rplt=o},l=function(e){var t,n,r={};for(e=e.split(" "),t=0,n=e.length;n>t;t++)r[e[t]]="JJ";i.nationalities=r},u=function(e){e=e.split("	");var t,n=e.length,r=[];for(t=0;n>t;t++)r.push(e[t].split(" "));i.synonyms=r};r(i.rules),o(i.suffixes),a(i.abbrs),s(i.dirty),u(i.synonyms),l(i.nationalities),e.lexicon=n("")}(),!function(){var t={'"':/(&quot;|\u201C|\u201D)/gi,"&":/&amp;/gi,"'":/(&#x27;|\u2018|\u2019)/gi,"<":/&lt;/gi,">":/&gt;/gi,"`":/&#x60/gi,shit:/(s\&\^t|sh\*t)/gi,fuck:/(f\*ck)/gi,"just kidding":"j/k",without:/w\/[to]/g,"with":"w/"," out of ":/\soutta\s/gi};e.decode=function(e){var n;for(n in t)t.hasOwnProperty(n)&&(e=e.replace(t[n],n));return e}}(),function(){function e(e,t,n){var i,r,o,s,a="string"==typeof t,l=n.length-(a?1:2);for(l;l>=0;l-=1)o=n[l],a?t===o.type&&(o.type=e):(s=n[l+1],i=t.indexOf(o.type),r=t.indexOf(s.tags[0]),i>-1&&r>-1&&r>=i&&(o.type=e,o.to=s.to,o.tags=o.tags.concat(s.tags),n.splice(l+1,1)))}function n(t){var n,i=f.length;for(n=0;i>n;n+=1)e(f[n][0],f[n][1],t)}function i(e,t,n){var i,r,o,s=c.length;for(i=0;s>i;i+=1)if(r=c[i][0],o=c[i][1],!(c[i].length>4&&n<c[i][4])&&r===e&&o===t)return[c[i][2],c[i][3]];return-1}function r(e,t){var n,r,o,s;for(n=e.length-2;n>=0;n-=1)if(o=e[n],s=e[n+1],r=i(o.type,s.type,t),0===r[0])o.right.push(s),e.splice(n+1,1),s.label=r[1];else if(1===r[0]){if("NSUBJ"===r[1]&&a("NSUBJ",s.left))continue;s.left.push(o),e.splice(n,1),o.label=r[1]}}function o(e,t,n){var i=e[0],r=e.length;if("VP"===i.type&&!a("NSUBJ",i.left)&&!a("NSUBJ",i.right)){var o=a("DOBJ",e[0].right);o&&(o.label="NSUBJ")}2===r&&"PUNCT"===e[1].type&&(i.right.push(e[1]),e[1].label="PUNCT",e.splice(1,1)),s(e,t,n)}function s(e,t,n){var i,r,o,a,l=0,u=e.length;for(l;u>l;l+=1){for(i=e[l],o="",a="",r=i.from;r<=i.to;r+=1)o+=" "+n.tokens[r].raw,a+=" "+n.tokens[r].norm;i.raw=o.slice(1),i.norm=a.slice(1),s(i.left,t,n),s(i.right,t,n),i.left.sort(function(e,t){return e.from-t.from}),i.right.sort(function(e,t){return e.from-t.from})}}function a(e,t){for(var n=0,i=t.length;i>n;n+=1)if(t[n].label===e)return t[n];return null}function l(e,t,n,i){return{meta:{},left:[],right:[],tags:i||[e],from:t,to:n,raw:null,norm:null,type:e,is:null}}t(u,{parse:function(e){var t,i=e.tags,s=(l("ROOT"),e.length),a=0,u=[];for(t=0;s>t;t+=1)u[t]=l(i[t],t,t);for(n(u);10>a&&u.length>1;)r(u,a),a+=1;o(u,i,e),e.root=u[0],e.root.label="ROOT",u.length>1},connect:function(e){}});var f=[["NP",["NNP","CD","NNS"]],["NP",["DT","PRP$","JJ","JJS","$","CD","$","NN","NNS"]],["NP",["DT","PRP$","JJ","JJS","$","CD","$","NNP","NNPS"]],["VP",["MD","VBP","VB"]],["VP",["MD","VBD"]],["VP",["VBZ","VBG"]],["NP",["NNP","NNPS"]],["ADV",["RB","RB"]],["ADJP",["RB","JJ"]],["PP","IN"],["PRT","RP"],["NP","PRP"],["NP","NNP"],["NP","NNPS"],["NP","NN"],["NP","DT"],["ADJ","JJ"],["NP","NNS"],["VAUX",["VB","RB"]],["VAUX",["VBP","RB"]],["VP","VBZ"],["VP","VBP"],["VP","VBD"],["ADV","WRB"],["ADV","RB"],["PUNCT","."],["PUNCT",","],["SP",["PP","NP"]]],c=[["NP","VP",1,"NSUBJ"],["VP","NP",0,"DOBJ"],["VB","NP",0,"DOBJ"],["PP","NP",0,"POBJ"],["NP","PP",0,"PREP"],["VP","PP",0,"PREP"],["VB","PP",0,"PREP"],["VP","VP",0,"CCOMP"],["VP","ADV",0,"ADVMOD"],["VB","ADV",0,"ADVMOD"],["ADV","PP",0,"PREP"],["PP","VP",1,"PREP"],["VP","ADJ",0,"ACOMP"],["VB","ADJ",0,"ACOMP"],["VB","VP",1,"AUX"],["VAUX","VP",1,"AUX"],["VAUX","VB",1,"AUX"],["VP","PUNCT",0,"PUNCT",1],["VB","PUNCT",0,"PUNCT",1],["PUNCT","VP",1,"PUNCT",1],["PUNCT","VB",1,"PUNCT",1],["ADV","VP",1,"ADVMOD",2],["ADV","VB",1,"ADVMOD",2],["ADV","ADV",1,"ADVMOD",2]]}(),!function(){var e=[["VBZ","VBP","VBD","VBG"],["MD","VB"],["NNP","NNPS","NN","NNS"],["WP","WRB"],["UH"]],n="unknown",i=[["NNP","NNP","compound"],["PRP","VBZ","subj"],["PRP","VBP","subj"],["PRP","VBD","subj"],["DT","VBZ","subj"],["DT","VBP","subj"],["DT","VBD","subj"],["WRB","VBP","attr"],["WRB","VBZ","attr"],["WRB","VBD","attr"],["VBG","VBP"],["TO","VB"],["TO","NN"],["TO","NNS"],["DT","NN","det"],["DT","NNP","det"],["PRP$","NN","poss"],["RB","JJ","advmod"],["JJ","NN","amod"],["JJ","NNS","amod"],["JJ","NNP","amod"],["VBG","JJ"],["NN","VBZ","subj"],["NN","VBP","subj"],["NN","VBD","subj"],["NN","VB","subj"],["NNP","VBZ","subj"],["NNP","VBP","subj"],["NNP","VBD","subj"],["NNP","VB","subj"]],r=[["PRP","VBZ","obj"],["PRP","VBP","obj"],["PRP","VBD","obj"],["NN","IN","obj"],["IN","VBZ"],["IN","VBP"],["IN","VBD"],["IN","VBG"],["JJ","VBD","acomp"],["JJ","VBP","acomp"],["JJ","VBZ","acomp"],["IN","VB"],["CC","JJ"],["NNP","VB","obj"],["NN","VB","obj"],["VB","VB","xcomp"]],o=20;t(l,{expand:function(e,t){var s,a,l,u,f,c,p=e.length,d=i.length,g=0,h=!1;for(s=0;p-t>s;s++,g=0)if(c=e.tokens[s],"number"!=typeof c.deps.master&&(u=e.tokens[s+t],c.deps.master!==u.deps.master&&"number"==typeof u.deps.master))for(;(f=e.tokens[u.deps.master])&&u!==f&&u.deps.master&&c.deps.master!==u.deps.master&&(g++,!(g>o));){for(l=c.pos,a=0;d>a;a++)if(l===i[a][0]&&f.pos===i[a][1]){c.deps.master=u.deps.master,c.deps.type=i[a][2]||n,h=!0;break}if(h)break;u=f}for(s=p-1,d=r.length;s>t;s--)if(c=e.tokens[s],"number"!=typeof c.deps.master&&(u=e.tokens[s-t],"number"==typeof u.deps.master&&c.deps.master!==u.deps.master))for(f=e.tokens[u.deps.master],l=c.pos,a=0;d>a;a++)if(l===r[a][0]&&f.pos===r[a][1]){c.deps.master=u.deps.master,c.deps.type=r[a][2]||n,h=!0;break}return h},parse:function(t){var s,a,l,u,f,c=t.length,p=i.length,d=0,g=!0,h=null,m=null,v=0,N=0;if(1===c)return f=t.tokens[0],f.deps.governor=!0,void(t.governor=0);for(s=0;c-1>s;s++)if(f=t.tokens[s],u=t.tags[s+1],l=f.pos,e[v].indexOf(l)>-1)null===h?(h=s,m=s):f.deps.master=h;else for(a=0;p>a;a++)if(l===i[a][0]&&u===i[a][1]){f.deps.master=s+1,f.deps.type=i[a][2]||n;break}for(s=c-1;s>=0;s--)f=t.tokens[s],u=t.tokens[s+1],s!==h&&("compound"===f.deps.type||"det"===f.deps.type?(null!==h&&s>h&&"number"!=typeof u.deps.master&&(u.deps.master=h,u.deps.type="obj"),N+=1,N>1&&(f.deps.master=u.deps.master)):N=0);for(s=c-1,p=r.length;s>0;s--)if(f=t.tokens[s],"number"!=typeof f.deps.master)for(u=t.tags[s-1],l=f.pos,a=0;p>a;a++)if(l===r[a][0]&&u===r[a][1]){f.deps.master=s-1,f.deps.type=r[a][2]||n;break}for(;g&&o>d;){for(g=!1,s=1;5>s;s+=1)g=this.expand(t,s)||g;d+=1}for(p=e.length-1;null===h&&p>v;)for(v++,s=0;c>s;s++)if(e[v].indexOf(t.tags[s])>-1){h=s;break}for(null!==h&&(t.governor=h,t.tokens[h].deps.governor=!0),this.reconnect(t),s=0;c>s;s++)f=t.tokens[s],s!==h&&(null!==f.deps.master&&f.deps.master!==s||(f.deps.master=h),null!==f.deps.master&&t.tokens[f.deps.master].deps.dependencies.push(s),"subj"===f.deps.type?t.deps.subjects.push(s):"obj"===f.deps.type&&t.deps.objects.push(s))},reconnect:function(e){var t,i,o,s,a,l,u,f=e.length,c=r.length;for(t=f-1;t>=0;t--)if(u=e.tokens[t],u.deps.governor!==!0&&"number"!=typeof u.deps.master){for(o=t,l=t;l===t&&(o--,-1!==o);)l=e.tokens[o].deps.master;if(-1!==o)for(a=e.tags[o],s=u.pos,i=0;c>i;i++)if(s===r[i][0]&&a===r[i][1]){u.deps.master=o,u.deps.type=r[i][2]||n;break}}}})}(),!function(){var e={t:[],s:[]},t={t:[],s:[],p:[]},n=[];a.init=function(e){n.push(e)},a.context=function(){var e,t={},i=n.length;for(e=0;i>e;e+=1)n[e](t);return t},a.before=function(t,n){e.hasOwnProperty(t)?e[t].push(n):console.warn("No detector with type "+t)},a.add=function(e,t){return console.warn("compendium.detectors.add is a deprecated function - please use compendium.detectors.after"),a.after(e,t)},a.after=function(e,n){t.hasOwnProperty(e)?t[e].push(n):console.warn("No detector with type "+e)},a.apply=function(n,i){var r,o,s=Array.prototype.slice.call(arguments).slice(2),a=i?e:t;if(a.hasOwnProperty(n))for(r=0,o=a[n].length;o>r;r++)a[n][r].apply(null,s)}}(),!function(){var e=function(e,t){if(t>=e.length)return!1;var n=e.tags[t+1];return"NNP"===n||"NNPS"==n},t=function(e,t){return"&"===e||"TO"===e||"CC"===e&&"or"!==t};a.before("s",function(n,i,r){var s,a,l,u,f,c,p=n.length,d=n.stats;if(!(d.p_upper>75||d.p_cap>85))for(s=0;p>s;s++)a=n.tags[s],l=n.tokens[s],u=l.norm,l.attr.entity>-1?c=null:"NN"===a?c=null:"NNP"===a||"NNPS"===a||c&&t(a,u)&&e(n,s)?c?(c.raw+=" "+l.raw,c.norm+=" "+l.norm,c.toIndex=s,l.attr.entity=f):(c=o.entity(l,s),f=l.attr.entity=n.entities.push(c)-1):c=null})}(),!function(){var e=Object.keys(i.neg).concat(Object.keys(i.refusal)),t=Object.keys(i.neg_neg),n=[["but","to"]];a.after("s",function(i,r,o){var s,a,l,u,f,c=i.length,p=n.length,d=!1,g=0,h=0;for(s=0;c>s;s++){if(f=i.tokens[s],u=i.tokens[s+1],f.profile.breakpoint||f.attr.is_punc)g=0,d=!1;else if(e.indexOf(f.norm)>-1)d?d=!1:(l=i.tokens[s-1],"RB"===f.pos&&l&&(l.attr.is_verb||"MD"===l.pos)&&(l.profile.negated=!0),h++,d=!0);else if(d&&t.indexOf(f.norm)>-1&&0===g)i.tokens[s-1].profile.negated=!1,h--,d=!1;else if(d){for(a=0;p>a&&c-1>s;a+=1)if(f.norm===n[a][0]&&u.norm===n[a][1]){d=!1;break}d&&(h++,g++)}f.profile.negated=d}i.profile.negated=h>0})}(),!function(){var e=["WP","WP$","WRB"];a.after("s",function(t,n){var i,r,o,s,a=t.length,l=t.stats,u=t.governor,f=t.profile.types,c=t.tokens[0],p=t.tokens[a-1];if(a>2&&(l.p_foreign>=10&&l.confidence<.5||l.confidence<=.35)&&f.push(g),l.p_cap>75&&l.p_upper<50&&a>10&&f.push(v),"!"===p.norm)f.push(m);else if("?"===p.norm||e.indexOf(c.pos)>-1&&0===l.breakpoints)f.push(h);else if(u>-1)if(i=t.tags[u],e.indexOf(i)>-1)f.push(h);else if("."!==p.pos&&0===i.indexOf("VB"))if("PRP"===t.tags[u+1]&&0===(t.tags[u+2]||"").indexOf("VB")&&f.push(h),u>1&&"PRP"===t.tags[u-1]&&0===t.tags[u-2].indexOf("VB"))f.push(h);else if("PRP"===t.tags[u-1]&&"MD"===t.tags[u-2])f.push(h);else for(r=t.tokens[u].deps.dependencies,o=0,s=r.length;s>o;o++)e.indexOf(t.tags[r[o]])>-1&&(t.tags[r[o]-1]||"").indexOf("VB")<0&&f.push(h);u>-1&&-1===f.indexOf(h)&&"VB"===t.tags[u]&&f.push(N)})}(),!function(){var e=i.dirty,t=i.polite,n=i.emphasis,r=["wo","'ll","will"],o=function(e,t){var n,i,r=t.deps.dependencies,s=r.length,a=0;if(0!==s){for(n=0;s>n;n+=1)i=e.tokens[r[n]],o(e,i),a+=i.profile.sentiment;t.profile.sentiment+=parseInt(a/s*100)/100}};a.after("s",function(i,s,a){var l,u,f,c,p,g,m,v,N=i.length,y=0,P=1,b=0,x=0,$=0,w=0,V=0,B=0,O=0,k=i.governor,D=i.profile;for(l=0;N>l;l++)u=i.tokens[l].profile,p=i.tokens[l].pos,g=i.tokens[l].norm,v=e.indexOf(g)>-1,m=t.indexOf(g)>-1,v?V++:m&&w++,u.negated&&"."!==p&&"EM"!==p&&(v?u.sentiment=u.sentiment/2:u.sentiment=-u.sentiment/2);for(k>-1&&(c=i.tokens[k],o(i,c),p=c.pos,c.attr.is_verb?D.main_tense="VBD"===p||"VBN"===p?"past":"present":"MD"===p&&r.indexOf(c.norm)>-1&&(D.main_tense="future")),i.stats.p_upper>70&&(P=1.2),l=0;N>l;l++)u=i.tokens[l].profile,p=i.tokens[l].pos,g=i.tokens[l].norm,f=i.tokens[l].attr,P*=u.emphasis,("JJS"===p||"RB"===p&&n.indexOf(g)>-1)&&($+=u.negated?2:5),f.is_verb&&(i.profile.nearest_verb_tense=f.tense),b=u.sentiment*(1+$/10),y+=b,b>O?O=b:B>b&&(B=b),u.emphasis*=1+$/10,$>0&&-1===["DT","POS","IN"].indexOf(p)&&$--;5>N?N*=2:N>10&&(N/=2),x=(O+-B)/N,y*=P,y/=N,D.types.indexOf(h)>-1&&(y/=2),D.sentiment=y,D.emphasis=P,D.amplitude=x,D.dirtiness=V/N,D.politeness=w/N,Math.abs(x)>.5&&Math.abs(y)<.5&&Math.abs(x)>Math.abs(y)?D.label="mixed":y<=d.profile.negative_threshold?D.label="negative":y>=d.profile.positive_threshold?D.label="positive":x>=d.profile.amplitude_threshold&&(D.label="mixed")})}(),!function(){var e=Object.keys(i.approval),t=Object.keys(i.refusal);a.after("s",function(n,r){var o,s,a,l=n.tokens[0],u=n.profile,f=n.governor>-1?n.tokens[n.governor]:null,c=f?f.deps.dependencies:null,p=n.stats.words,d=u.types;if(!(d.indexOf(h)>-1)){if(t.indexOf(l.norm)>-1)d.push(P);else if(1===p&&"JJ"===l.pos&&u.sentiment<0)d.push(P);else if(f)if(t.indexOf(f.norm)>-1)d.push(P);else if(d.indexOf(N)>-1&&i.approval_verbs.indexOf(f.norm)>-1&&f.profile.negated)d.push(P);else if("UH"===f.pos)for(s=0,a=c.length;a>s;s+=1)o=n.tokens[c[s]],("UH"===o.pos||"RB"===o.pos)&&t.indexOf(o.norm)>-1&&d.push(P);if(!(d.indexOf(P)>-1))if(e.indexOf(l.norm)>-1)d.push(y);else if(1===p&&"JJ"===l.pos&&u.sentiment>0)d.push(y);else if(f&&3>=p)if(e.indexOf(f.norm)>-1)d.push(y);else if(d.indexOf(N)>-1&&i.approval_verbs.indexOf(f.norm)>-1)d.push(y);else if("UH"===f.pos)for(s=0;a>s;s+=1)o=n.tokens[c[s]],"UH"===o.pos&&e.indexOf(o.norm)>-1&&d.push(y)}})}(),!function(){var e=i.floatChar,t=i.thousandChar,n=/[0-9]/,r=/^-?[0-9]+$/,o=new RegExp("^-?[0-9]*\\"+e+"[0-9]+$"),s=new RegExp("^-?[0-9]+([\\"+t+"][0-9]+){1,}$"),l=new RegExp("^-?[0-9]+([\\"+t+"][0-9]+){1,}(\\"+e+"[0-9]+)$"),u=new RegExp("\\"+t,"g"),f=i.numbers,c=i.multipliers,p=function(e){var t=e.norm;if(t.match(n)){if(t.match(r))return parseInt(t,10);if(t.match(o))return parseFloat(t);if(t.match(l))return parseFloat(t.replace(u,""));if(t.match(s))return parseInt(t.replace(u,""),10)}return t=e.attr.singular,f.hasOwnProperty(t)?f[t]:null},d=function(e,t){var n,i,r,o=t[2],s=t[1],a=0;if(1===t[1])return n=o[0],p(n);for(i=0;s>i;i+=1){if(n=o[i],r=p(n),null===r)return null;c.indexOf(n.attr.singular)>-1?a*=r:a+=r}return a},g=function(e,t){var n,i=e[2],r=i.length;for(n=0;r>n;n+=1)i[n].attr.value=t};a.before("s",function(e,t,n,i){for(var r,o,s=i.numericSections,a=s.length,r=0;a>r;r+=1)o=d(e,s[r]),null!==o&&g(s[r],o)})}(),!function(){var t=e.lexicon;a.before("t",function(n,r,o){var s,a,l,u,c=n.raw,p=n.norm,d=n.stem,g=n.pos,h=0,m=1;a=c.toLowerCase(),l=a.length,l>1&&c.indexOf(".")===l-1&&(u=i.abbrs.indexOf(a.slice(0,l-1)))>-1?(n.attr.abbr=!0,p=i.abbrs_rplt[u]):c.match(/^([a-z]{1}\.)+/gi)?n.attr.acronym=!0:p=e.synonym(p),"."===g?(u=c[0],"!"===u||"?"===u?(m=c.length>1?2:"?"===u?1:1.5,c.length>1&&(p=c[0])):"."===u&&"."===c[1]&&(m=1.2,p="...")):"EM"===g?m=1.2:"UH"===g?m=1.1:0===g.indexOf("VB")?n.attr.infinitive=f.infinitive(p):"NNS"===g||"CD"===g?(s=f.singularize(p),n.attr.singular=s):"NN"===g&&(n.attr.singular=p),"NNP"!==g&&"NNPS"!==g&&"IN"!==g&&(t.hasOwnProperty(p)?(u=t[p],u.condition&&n.pos!==u.condition||(h=u.sentiment)):"NNS"===g&&t.hasOwnProperty(s)?(u=t[s],u.condition&&g!==u.condition||(h=u.sentiment/2)):t.hasOwnProperty(d)?(u=t[d],u.condition&&g!==u.condition||(h=u.sentiment/2)):i.dirty.indexOf(p)>-1?h=-2:i.polite.indexOf(p)>-1&&(h=1)),n.profile.sentiment=h,n.profile.emphasis=m,n.norm=p})}(),!function(){var e=[",",":",";","("],t=["-","—","/"];a.before("t",function(n,i,r){var o=n.raw,s=n.pos;(e.indexOf(s)>-1||t.indexOf(o)>-1)&&(n.profile.breakpoint=!0,r.stats.breakpoints++)})}(),!function(){a.before("t",function(t,n,r){var s,a,l,u,f,c=e.lexer.regexps,p=" "+t.norm+" ";for(s in c)c.hasOwnProperty(s)&&p.match(c[s])&&(a=o.entity(t,n,s),t.attr.entity=r.entities.push(a)-1,"username"!==a.type&&"composite"!==s||(t.pos="NNP",r.tags[n]="NNP"),r.stats.confidence+=1/r.length,"pl"===s&&(a.type="political_affiliation",l=t.norm.split("-"),f=l[1].length,"d"===l[0]?a.meta.party="democrat":a.meta.party="republican",u="."===l[1][f-1]?i.abbrs.indexOf(l[1].slice(0,f-1)):i.abbrs.indexOf(l[1]),u>-1&&(l[1]=i.abbrs_rplt[u]),t.norm=a.meta.party+", "+l[1]))})}(),!function(){var e=i.numbers;a.init(function(e){e.numericSections=[],e.inNumericSection=!1}),a.before("t",function(t,n,i,r){var o=t.pos,s=r.numericSections;"CD"===o||"NNS"===o&&e.hasOwnProperty(t.attr.singular)?r.inNumericSection?(s[s.length-1][1]+=1,s[s.length-1][2].push(t)):(r.numericSections.push([n,1,[t]]),r.inNumericSection=!0):r.inNumericSection&&(r.inNumericSection=!1)})}(),!function(){var n=[",",".",":",'"',"(",")"];t(o,{entity:function(e,t,n){return{raw:e.raw,norm:e.norm,fromIndex:t,toIndex:t,type:n||null,meta:{}}},sentence:function(e,t){return{language:t,time:0,length:0,governor:-1,raw:e,stats:{words:0,confidence:0,p_foreign:0,p_upper:0,p_cap:0,avg_length:0,breakpoints:0},profile:{label:"neutral",sentiment:0,emphasis:1,amplitude:0,politeness:0,dirtiness:0,types:[],main_tense:"present"},has_negation:!1,entities:[],deps:{subjects:[],objects:[]},root:null,tokens:[],tags:[]}},token:function(t,i,r){var o=null,s=0===r.indexOf("VB");return i=i.toLowerCase(),o="VBD"===r||"VBN"===r?"past":"VBG"===r?"gerund":"present",{raw:t,norm:i,stem:e.stemmer(i),pos:r||"",profile:{sentiment:0,emphasis:1,negated:!1,breakpoint:!1},attr:{value:null,acronym:!1,abbr:!1,is_verb:s,tense:o,infinitive:null,is_noun:0===r.indexOf("NN"),plural:null,singular:null,entity:-1,is_punc:n.indexOf(r)>-1},deps:{master:null,governor:!1,type:"unknown",dependencies:[]}}},tag:function(e,t,n){return{tag:e||"NN",norm:n,confidence:t||0,blocked:!1}}})}(),!function(){var o,s,a=i.abbrs,l=/(\S.+?[….\?!\n])(?=\s+|$|")/g,u=new RegExp("(^| |\\(|\\[|{)("+a.join("|")+")[.!?] ?$","i"),f=" !?()[]{}\"'`%•.…:;,$€£¥\\/+=*_–",c=e.punycode.ucs2,p=i.floatChar,d=i.thousandChar,g=/^-?[0-9]+$/,h=/^[0-9]+$/,m=new RegExp("^-?[0-9]+[.,]$"),v={complexFloat:"\\s(-?[0-9]+([\\"+d+"][0-9]+){1,}(\\"+p+"[0-9]+))"},N={},y=i.emots.length,P=function(e){var t=0,n=e.length;for(t=0;n>t;t+=1)if(null===e[t]||"emoticon"!==e[t].group)return!1;return!0},b=function(e,t,n,i){var r,o,s,a;for(r in n)if(n.hasOwnProperty(r))for(s=new RegExp(n[r],"g");null!==(a=s.exec(e));)o=a[0].length,t[a.index]={content:a[1],type:r,group:i,length:o-(o-a[1].length)
}};for(o=0;2*y>o;o+=2)s=i.emots[o/2],N["em_"+o]="\\s("+n(s)+"+)[^a-z]",s.match(/^[a-zA-Z]/)||(N["em_"+(o+1)]="[a-zA-Z]("+n(s)+"+)[^a-z]");t(e.lexer,{regexps:{email:"\\s([^\\s]+@[^\\s]+(\\.[^\\s\\)\\]]+){1,})",composite:"\\s([a-zA-Z]&[a-zA-Z])",username:"\\s(@[a-zA-Z0-9_]+)",html_char:"\\s(&[a-zA-Z0-9]{2,4};)",hashtag:"\\s(#[a-zA-Z0-9_]+)",url:"\\s((https?|ftp):\\/\\/[\\-a-z0-9+&@#\\/%\\?=~_|!:,\\.;]*[\\-a-z0-9+&@#\\/%=~_|])",ip:"\\s(([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5])\\.([01]?\\d\\d?|2[0-4]\\d|25[0-5]))\\s",pl:"\\s([rd]-([a-z]+\\.{0,1})+)"},consolidate:function(e,t,n){for(var i=1,r=e.length;r>i;i+=1)P(t[i])&&(e[i-1]=e[i-1].concat(e[i]),n[i-1]+=" "+n[i],e.splice(i,1),t.splice(i,1),n.splice(i,1),i-=1,r-=1);return e},sentences:function(e){var t,n,i=e.split(l),r=i.length,o=[];for(t=0;r>t;t++)n=i[t].trim(),n.match(u)||n.match(/[ |\.][A-Za-z]\.?$/)?r-1>t&&!i[t+1].match(/^[A-Za-z]\s/)?i[t+1]=n+" "+i[t+1].trim():o.push(n):n&&o.push(n);return o},splitTokens:function(e){var t,n,i,o=e.length,s=[],a=[],l=null,u=" "+e+" ",p={},d=function(e){if(e){"object"==typeof e&&(l=e,e=e.content),i=c.decode(e);var t,n=i.length,r="";for(t=0;n>t;t++)i[t]>=128511?(r&&(a.push(l),s.push(r)),a.push({group:"emoticon"}),s.push(c.encode([i[t]])),r=""):r+=c.encode([i[t]]);r&&(a.push(l),s.push(r))}},g=function(e,t){d(e),d(t),n=""};for(b(u,p,r.regexps,"entity"),b(u,p,N,"emoticon"),b(u,p,v,"number"),n="",t=0;o>t;t++)p.hasOwnProperty(t)?(g(n,p[t]),t+=p[t].length-1):f.indexOf(e[t])>-1?g(n,e[t]):n+=e[t];return g(n),{tokens:s,meta:a}},tokens:function(e,t){var n,i,o=r.splitTokens(e),s=o.tokens,l=o.meta,u=s.length,f=!1,c=[],p=[],d="",v="",N=0;for(n=0;u>n;n++)if(i=s[n].trim())if(d=N>0?c[N-1]:"",v=u-1>n?s[n+1]:"",("."===i||","===i)&&d.match(g)&&v.match(h)||i.match(g)&&d.match(m))f=!1,c[N-1]+=i;else if("."===i&&u-1>n&&N>0&&a.indexOf(d.toLowerCase())>-1)f=!1,c[N-1]+=i;else if(f&&u-1>n&&1===i.length)c[N-1]+=i;else{if(i.match(/^\W+$/gi)){if(f=!1,i===d[d.length-1]){c[N-1]+=i;continue}}else i.match(/^[A-Za-z]{1}$/g)&&u-1>n&&"."===v&&(f=!0);i&&(c.push(i),p.push(l[n]),N++)}else f=!1;return{result:r.postprocess(c,p),meta:p}},advanced:function(e,t,n){var i,o,s=r.sentences(e),a=s.length,l=[],u=[];if(n)return{sentences:s,raws:null,meta:null};for(i=0;a>i;i++)u.push(s[i]),o=r.tokens(s[i],t),l[i]=o.meta,s[i]=o.result;return r.consolidate(s,l,u),{raws:u,sentences:s,meta:l}},lex:function(e,t,n){return r.advanced(e,t,n).sentences}}),e.lex=r.lex}(),!function(){var n=["'","’","ʼ"];t(e.lexer,{postprocess:function(e){var t,i,r=e.length,o=[];for(t=0;r>t;t+=1)i=e[t],n.indexOf(i)>-1?o[o.length-1]+="'":o.push(i);return o}})}(),!function(){var n=e.inflector.isPlural,r=0,s=1,a=2,l=3,u=4,f=41,p=5,d=51,g=6,h=8,m=81,v=9,N=11,y=12,P=121,b=13,x=14,$=141,w=15,V=16,B=17,O=171,k=172,D=18,C=19,R=21,J=e.lexicon,j=i.emots,A=i.rules,_=A.length,S=i.suffixes,z=S.length,Z=new RegExp("^-?[0-9]+([\\"+i.thousandChar+"][0-9]+){1,}(\\"+i.floatChar+"[0-9]+)$"),E=function(t){var n,i=t.replace(/(.)\1{2,}/g,"$1$1");return e.lexicon.hasOwnProperty(i)?i:(n=e.synonym(i),n!==i?n:(i=t.replace(/(.)\1{1,}/g,"$1"),e.lexicon.hasOwnProperty(i)?i:(n=e.synonym(i),n!==i?n:null)))},T=function(e){return e.match(/^[A-Z][a-z\.]+$/g)||e.match(/^[A-Z]+[0-9]+$/g)||e.match(/^[A-Z][a-z]+[A-Z][a-z]+$/g)};t(c,{applyRule:function(e,t,n,i,o,c,J){if(!(e.from!==n||e.secondRun&&0===J)){var j,A,_=e.type;if(_!==r){if(t=t.toLowerCase(),_===a){if(i>0&&c[i-1]===e.c1)return void(c[i]=e.to)}else if(_===d){if(j=o[i-1]||"",c[i-1]===e.c2&&j.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===l){if(c[i+1]===e.c1)return void(c[i]=e.to)}else if(_===u){if(c[i+2]===e.c1)return void(c[i]=e.to)}else if(_===f){if(c[i-2]===e.c1)return void(c[i]=e.to)}else if(_===s){if(c[i-1]===e.c1||c[i-2]===e.c1)return void(c[i]=e.to)}else if(_===p){if(j=o[i-1]||"",j.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===g){if(t===e.c1)return void(c[i]=e.to)}else if(_===h){if(t===e.c2&&c[i-1]===e.c1)return void(c[i]=e.to)}else if(_===m){if(j=o[i-1]||"",t===e.c2&&j.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===v){if(c[i+1]===e.c1||c[i+2]===e.c1||c[i+3]===e.c1)return void(c[i]=e.to)}else if(_===N){if(j=o[i+2]||"",j.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===P){if(j=o[i+1]||"",t===e.c1&&j.toLowerCase()===e.c2)return void(c[i]=e.to)}else if(_===y){if(t===e.c1&&c[i+1]===e.c2)return void(c[i]=e.to)}else if(_===b){if(c[i-1]===e.c1||c[i-2]===e.c1||c[i-3]===e.c1)return void(c[i]=e.to)}else if(_===x){if(c[i-1]===e.c1&&c[i+1]===e.c2)return void(c[i]=e.to)}else if(_===$){if(t===e.c1&&c[i-1]===e.c2&&c[i+1]===e.c3)return void(c[i]=e.to)}else if(_===w){if(j=o[i+1]||"",j.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===V){if(c[i+1]===e.c1||c[i+2]===e.c1)return void(c[i]=e.to)}else if(_===B){if(c[i-2]===e.c1&&c[i-1]===e.c2)return void(c[i]=e.to)}else if(_===k){if(c[i-2]===e.c1&&c[i-1]===e.c2&&c[i+1]===e.c3)return void(c[i]=e.to)}else if(_===O){if(c[i+1]===e.c1&&c[i+2]===e.c2)return void(c[i]=e.to)}else if(_===D){if(j=o[i+1]||"",A=o[i+2]||"",j.toLowerCase()===e.c1||A.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===C){if(A=o[i-2]||"",A.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===R){if(j=o[i-1]||"",A=o[i-2]||"",j.toLowerCase()===e.c1||A.toLowerCase()===e.c1)return void(c[i]=e.to)}else if(_===s&&(j=c[i-1]||"",A=c[i-2]||"",j===e.c1||A===e.c1))return void(c[i]=e.to)}else if(0===i&&t===e.c1)return void(c[i]=e.to)}},applyRules:function(e,t,n,i,r){var o;for(o=0;_>o;o++)c.applyRule(A[o],e,i[t],t,n,i,r)},apply:function(e,t,n){for(var i,r=e.length,o=0;2>o;){for(i=0;r>i;i++)n[i]!==!0&&this.applyRules(e[i],i,e,t,o);o++}return t},testSuffixes:function(e){var t;for(t=0;z>t;t++)if(e.match(S[t].regexp))return S[t].pos;return null},getTag:function(t){var n,i,r,s,a,l=o.tag();if(l.norm=t,t.length>1)for(n=null,i=0,r=j.length;r>i;i++)if(0===t.indexOf(j[i]))return l.tag="EM",l.blocked=!0,l.confidence=1,l;return n=e.lexicon[t],n&&"-"!==n?(l.tag=n,l.blocked=n.blocked,l.confidence=1,l):(s=t.toLowerCase(),a=e.synonym(s),a!==s&&(n=e.lexicon[a])?(l.tag=n,l.confidence=1,l):s.match(/(\w)\1+/g)&&(a=E(s))?(l.norm=a,n=e.lexicon[a],l.tag=n,l.confidence=.8,l):"string"==typeof t&&t.match(/[A-Z]/g)&&(n=e.lexicon[s],n&&"-"!==n)?(l.tag=n,l.confidence=.75,l):(n=c.testSuffixes(t),n?(l.tag=n,l.confidence=.25,l):t.indexOf("-")>-1?(t.match(/^[A-Z]/g)?l.tag="NNP":l.tag="JJ",l.confidence/=2,l):l))},tag:function(e){var t,r,o,s,a,l,u,f=[],p=[],d=[],g=e.length,h=!1,m=0,v=function(e,t,n){e="object"==typeof e?e.pos:e,f.push("-"===e?"NN":e),p.push("boolean"==typeof n?n:!1),m+=t};for(o=0;g>o;o++)t=e[o],d[o]=t,t.match(/^[%\+\-\/@]$/g)?v("SYM",1,!0):t.match(/^(\?|\!|\.){1,}$/g)?v(".",1,!0):t.match(/^-?[0-9]+([\.,][0-9]+)?$/g)||t.match(Z)||t.match(/^([0-9]{2}|[0-9]{4})s$/g)||t.match(/^[0-9]{2,4}-[0-9]{2,4}$/g)?v("CD",1,!0):(l=c.getTag(e[o]),v(l.tag,l.confidence,l.blocked),d[o]=l.norm);for(o=0;g>o;o++)if(r=f[o],"SYM"!==r&&"."!==r){if(t=e[o],a=t.toLowerCase(),s=t.length,u=0===o?"":f[o-1],0===o){if("that"===a){f[o]="DT",m++;continue}if(("NN"===r||"VB"===r)&&i.infinitives.indexOf(a)>-1){f[o]="VB",m++;continue}}!(s>3&&t.match(/[^e]ed$/gi)&&0===r.indexOf("N"))||0!==o&&t.match(/^[A-Z][a-z]+/g)?!(s>4&&t.lastIndexOf("ing")===s-3&&-1===i.ing_excpt.indexOf(a))||0!==r.indexOf("N")&&"MD"!==r||0!==o&&t.match(/^[A-Z][a-z]+/g)||"NN"===u||"JJ"===u||"DT"===u||"VBG"===u?s>4&&a.lastIndexOf("in")===s-2&&"NN"===r&&(0===o||!t.match(/^[A-Z][a-z]+/g))&&"NN"!==u&&"JJ"!==u&&"DT"!==u&&"VBG"!==u&&(l=J[a+"g"],l&&"VBG"===l.pos)?f[o]="VBG":("TO"===u&&i.infinitives.indexOf(a)>-1&&(r="VB"),"DT"!==u&&t.match(/^[IVXLCDM]+$/g)&&"I"!==t&&(r="CD"),"NN"===r||"VB"===r||"JJ"===r&&i.nationalities.hasOwnProperty(a)===!1?t.match(/^[A-Z]+$/g)||t.match(/^([a-z]{1}\.)+/gi)?(r="NNP",h=!0):o>0&&T(t)?(r="NNP",h=!0,l=e[o-1],1!==o||"NN"!==u&&"NNS"!==u&&"JJ"!==u&&"VB"!==u||!T(l)||(f[o-1]="NNP")):h=!1:h&&("CD"===r&&t.match(/^[IVXLCDM]+$/g)||"I"===t)?r="NNP":h="NNP"===r||"NNPS"===r,"NN"===r&&n(t)&&(r="NNS"),f[o]=r):f[o]="VBG":f[o]="VBN"}for(c.apply(e,f,p),o=0;g>o;o++)t=e[o],r=f[o],u=f[o-1]||"",t.match(/ed$/g)&&("JJ"!==r||"VBZ"!==u&&"VBP"!==u||"TO"!==f[o+1]||(r="VBN")),f[o]=r;return{tags:f,norms:d,confidence:m/g}}}),e.tag=c.tag}(),!function(){var t=["#","SYM","CR","EM"];e.stat=function(e){var n,i,r,o,s=e.length,a=s,l=e.stats,u=0,f=0,c=0,p=0,d=0;for(n=0;s>n;n++)i=e.tokens[n],r=i.raw,u+=r.length,o=e.tags[n],i.attr.is_punc||t.indexOf(o)>-1?a--:(p+=1,r.match(/^[A-Z][a-zA-Z]+$/g)&&d++,r.match(/[A-Z]+/)&&!r.match(/[a-z]/)&&c++,"FW"===o&&f++);0===a&&(a=1),l.words=p,l.p_foreign=100*f/a,l.p_upper=100*c/a,l.p_cap=100*d/a,l.avg_length=u/a}}(),!function(){var t=i.synonyms,n=t.length;e.synonym=function(e){var i;for(i=0;n>i;i++)if(t[i].indexOf(e)>0)return t[i][0];return e}}()}("undefined"==typeof exports?this.compendium={}:exports);